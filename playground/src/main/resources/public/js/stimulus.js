import { Application, Controller } from "@hotwired/stimulus"
import Modal from "../controllers/modal_controller.js";

window.Stimulus = Application.start()

const controllers = [
    ["modal", Modal]
]

controllers.forEach(ctl => {
    Stimulus.register(ctl[0], ctl[1])
})

// TODO this endpoind could be auto configured by spring-stimulus module (in the future)
// const res = await fetch('/__stimulus/controllers')
// const files = await res.json() // [ "users/index_controller.js", "flash_controller.js", ... ]
//
// await Promise.all(files.map(async file => {
//     const id = file.replace(/[_-]controller\.js$/, '')
//         .replace(/\//g, '-')
//         .replace(/_/g, '-')
//         .replace(/^-+/, '')
//     const mod = await import(`/controllers/${file}`)
//     Stimulus.register(id, mod.default)
// }))

// TODO this could be completely generated by a build system, this code should only be used
// during development
